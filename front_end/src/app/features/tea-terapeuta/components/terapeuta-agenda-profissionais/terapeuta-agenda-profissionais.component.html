<div class="tea-agenda-container">
  <h1 class="agenda-title">Agenda</h1>

  <!-- Tabs superiores -->
  <div class="tabs-top">
    <button class="tab-btn" [class.active]="topTab==='evolucoes'" (click)="setTopTab('evolucoes')">Evolu√ß√µes</button>
    <button class="tab-btn" [class.active]="topTab==='devolutivas'" (click)="setTopTab('devolutivas')">Devolutivas</button>
  </div>

  <!-- Tabs internas -->
  <div class="tabs-inner">
    <button class="tab-btn" [class.active]="statusTab==='pendentes'" (click)="setStatusTab('pendentes')">Pendentes</button>
    <button class="tab-btn" [class.active]="statusTab==='evoluidos'" (click)="setStatusTab('evoluidos')">Evolu√≠dos</button>
    <button class="tab-btn" [class.active]="statusTab==='ambos'" (click)="setStatusTab('ambos')">Ambos</button>
  </div>

  <!-- Filtros -->
  <div class="filters-row">
    <label class="filter-label">Especialidade</label>
    <select class="filter-select" [(ngModel)]="filtroEspecialidade">
      <option value="">Selecione uma op√ß√£o...</option>
      <option *ngFor="let e of especialidades" [value]="e.id">{{ e.nome }}</option>
    </select>
    <button class="search-btn" (click)="buscar()">Buscar</button>
  </div>

  <!-- Lista -->
  <div class="agenda-list">
    <div *ngFor="let slot of exibicaoSlots" class="agenda-card">
      <div class="agenda-card-header">
        <div class="agenda-time">{{ slot.data | date:'dd/MM/yyyy' }} {{ slot.hora }}</div>
        <div class="agenda-actions">
          <button class="action-btn" (click)="mostrar(slot)">üîé Mostrar</button>
        </div>
      </div>
      <div class="agenda-card-body">
        <div class="agenda-patient" [ngClass]="slot.status === 'confirmado' ? 'status-evoluido' : 'status-pendente'">
          {{ slot.paciente || 'Paciente n√£o informado' }}
        </div>
        <div class="agenda-info">{{ getProfissionalNome(slot.profissionalId) }} ‚Äî {{ getEspecialidadeNome(slot.especialidadeId) }}</div>
      </div>
      <div class="agenda-card-footer" *ngIf="slot.status === 'confirmado'; else pendenteActions">
        <button class="secondary-btn" (click)="visualizarHistorico(slot)">Visualizar Historico</button>
        <button class="neutral-btn" (click)="retomarAtendimento(slot)">Retomar Atendimento</button>
      </div>
      <ng-template #pendenteActions>
        <div class="agenda-card-footer">
          <button class="primary-btn" (click)="atender(slot)">Atender</button>
          <button class="secondary-btn" (click)="marcarEvoluido(slot)">Marcar como Evolu√≠do</button>
        </div>
      </ng-template>
    </div>
  </div>
</div>