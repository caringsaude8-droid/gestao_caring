<div class="page-container">
  <!-- Header -->
  <div class="page-header">
    <div class="header-content">
      <div>
        <h1 class="page-title">Conv√™nios</h1>
        <p class="page-subtitle">Gerencie os conv√™nios dispon√≠veis para cadastro</p>
      </div>
      <button class="btn btn-primary" (click)="openForm()">
        <i class="icon-plus"></i>
        Novo Conv√™nio
      </button>
    </div>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-content">
        <div class="stat-info">
          <h3 class="stat-value">{{ conveniosAtivos }}</h3>
          <p class="stat-label">Conv√™nios Ativos</p>
        </div>
        <div class="stat-icon active">‚úÖ</div>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-content">
        <div class="stat-info">
          <h3 class="stat-value">{{ conveniosInativos }}</h3>
          <p class="stat-label">Conv√™nios Inativos</p>
        </div>
        <div class="stat-icon inactive">‚ùå</div>
      </div>
    </div>
    <div class="stat-card">
      <div class="stat-content">
        <div class="stat-info">
          <h3 class="stat-value">{{ convenios.length }}</h3>
          <p class="stat-label">Total de Conv√™nios</p>
        </div>
        <div class="stat-icon total">üìã</div>
      </div>
    </div>
  </div>

  <!-- Filtros -->
  <div class="caring-card">
    <div class="card-content">
      <div class="filters-container">
        <div class="input-group">
          <i class="icon-search"></i>
          <input type="text" placeholder="Buscar conv√™nios..." [(ngModel)]="searchTerm" class="input" />
        </div>

        <div class="filter-select">
          <select [(ngModel)]="selectedStatus" class="select">
            <option value="todos">Todos os status</option>
            <option value="ativo">Apenas ativos</option>
            <option value="inativo">Apenas inativos</option>
          </select>
        </div>
      </div>
    </div>
  </div>

  <!-- Lista de Conv√™nios -->
  <div class="convenios-grid">
    <div *ngFor="let conv of filteredConvenios" class="convenio-card">
      <div class="convenio-header">
        <div class="convenio-icon">üè•</div>
        <div class="convenio-info">
          <h3 class="convenio-name">{{ conv.nome }}</h3>
          <span class="badge" [class]="getStatusClass(conv.status)">{{ getStatusLabel(conv.status) }}</span>
        </div>
        <div class="convenio-actions">
          <button class="btn btn-ghost btn-sm" (click)="toggleStatus(conv)">Alterar Status</button>
          <button class="btn btn-ghost btn-sm danger" (click)="deleteConvenio(conv)">Excluir</button>
        </div>
      </div>
      <div class="convenio-details">
        <div class="detail-item"><span class="detail-label">C√≥digo:</span> <span>{{ conv.codigo || '‚Äî' }}</span></div>
        <div class="detail-item"><span class="detail-label">Tabela:</span> <span>{{ conv.tabelaConvenio }}</span></div>
        <div class="detail-item"><span class="detail-label">Cobran√ßa:</span> <span>{{ conv.tipoCobranca }}</span></div>
        <div class="detail-item"><span class="detail-label">Validade:</span> <span>{{ conv.validade ? (conv.validade | date:'dd/MM/yyyy') : '‚Äî' }}</span></div>
        <div class="detail-item"><span class="detail-label">CNPJ:</span> <span>{{ conv.cnpj || '‚Äî' }}</span></div>
        <div class="detail-item"><span class="detail-label">Data de Faturamento:</span> <span>{{ conv.dataFaturamento ? (conv.dataFaturamento | date:'dd/MM/yyyy') : '‚Äî' }}</span></div>
      </div>
    </div>
  </div>

  <!-- Formul√°rio de Novo Conv√™nio -->
  <div class="modal-overlay" *ngIf="showForm" (click)="closeForm()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2 class="modal-title">Novo Conv√™nio</h2>
        <button class="modal-close-btn" (click)="closeForm()">‚úï</button>
      </div>
      <form class="modal-body" (ngSubmit)="createConvenio()">
        <div class="form-row">
          <div class="form-group">
            <label for="nome" class="form-label">Nome do Conv√™nio *</label>
            <ui-input id="nome" type="text" [(ngModel)]="newConvenio.nome" name="nome" placeholder="Ex: Unimed"></ui-input>
          </div>
          <div class="form-group">
            <label for="codigo" class="form-label">C√≥digo</label>
            <ui-input id="codigo" type="text" [(ngModel)]="newConvenio.codigo" name="codigo" placeholder="Ex: UNM-001"></ui-input>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="tabelaConvenio" class="form-label">Tabela Conv√™nio</label>
            <select id="tabelaConvenio" class="form-select" [(ngModel)]="newConvenio.tabelaConvenio" name="tabelaConvenio">
              <option [ngValue]="'Padr√£o'">Padr√£o</option>
              <option [ngValue]="'Especial'">Especial</option>
            </select>
          </div>
          <div class="form-group">
            <label for="tipoCobranca" class="form-label">Tipo de Cobran√ßa</label>
            <select id="tipoCobranca" class="form-select" [(ngModel)]="newConvenio.tipoCobranca" name="tipoCobranca">
              <option [ngValue]="'Plano de Sa√∫de'">Plano de Sa√∫de</option>
              <option [ngValue]="'Particular'">Particular</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="validade" class="form-label">Validade</label>
            <input id="validade" type="date" [(ngModel)]="newConvenio.validade" name="validade" class="form-input" />
          </div>
          <div class="form-group">
            <label for="status" class="form-label">Status</label>
            <select id="status" class="form-select" [(ngModel)]="newConvenio.status" name="status">
              <option [ngValue]="'ativo'">Ativo</option>
              <option [ngValue]="'inativo'">Inativo</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="cnpj" class="form-label">CNPJ</label>
            <ui-input id="cnpj" type="text" [(ngModel)]="newConvenio.cnpj" name="cnpj" placeholder="Ex: 12.345.678/0001-99"></ui-input>
          </div>
          <div class="form-group">
            <label for="dataFaturamento" class="form-label">Data de Faturamento</label>
            <input id="dataFaturamento" type="date" [(ngModel)]="newConvenio.dataFaturamento" name="dataFaturamento" class="form-input" />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="observacoes" class="form-label">Observa√ß√µes</label>
            <textarea id="observacoes" [(ngModel)]="newConvenio.observacoes" name="observacoes" class="form-input" rows="3"></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="modal-btn modal-btn-secondary" (click)="closeForm()">Cancelar</button>
          <button type="submit" class="modal-btn modal-btn-primary">Salvar</button>
        </div>
      </form>
    </div>
  </div>
</div>