<div class="prof-container">
  <h1 class="title">Terapeuta TEA</h1>

  <div class="filters">
    <label for="especialidade">Especialidade</label>
    <select id="especialidade" [(ngModel)]="especialidadeSelecionada" (change)="buscar()">
      <option value="">Todas</option>
      <option *ngFor="let esp of especialidades" [value]="esp.id">{{ esp.nome }}</option>
    </select>
    <div class="summary">
      <span class="badge">Especialidade: {{ nomeEspecialidade }}</span>
      <span class="badge">Pendentes: {{ pendentes.length }}</span>
      <span class="badge">Evoluídos: {{ evoluidos.length }}</span>
    </div>
  </div>

  <div class="list-section">
    <h2>Pendentes</h2>
    <div *ngIf="pendentes.length === 0" class="card placeholder">
      <div class="left">
        <div class="patient orange">Nenhum atendimento pendente</div>
        <div class="meta">--/--/---- --:-- —</div>
      </div>
      <div class="right">
        <button class="primary" disabled>Atender</button>
      </div>
    </div>
    <div *ngFor="let slot of pendentes" class="card">
      <div class="left">
        <div class="patient orange">{{ slot.paciente || 'Paciente não informado' }}</div>
        <div class="meta">{{ slot.data | date:'dd/MM/yyyy' }} {{ slot.hora }} — {{ getEspNome(slot.especialidadeId) }}</div>
      </div>
      <div class="right">
        <button class="primary" (click)="atender(slot)">Atender</button>
      </div>
    </div>
  </div>

  <div class="list-section">
    <h2>Evoluídos</h2>
    <div *ngIf="evoluidos.length === 0" class="card placeholder">
      <div class="left">
        <div class="patient green">Nenhuma evolução confirmada</div>
        <div class="meta">--/--/---- --:-- —</div>
      </div>
      <div class="right">
        <button class="secondary" disabled>Visualizar Histórico</button>
      </div>
    </div>
    <div *ngFor="let slot of evoluidos" class="card">
      <div class="left">
        <div class="patient green">{{ slot.paciente || 'Paciente não informado' }}</div>
        <div class="meta">{{ slot.data | date:'dd/MM/yyyy' }} {{ slot.hora }} — {{ getEspNome(slot.especialidadeId) }}</div>
      </div>
      <div class="right">
        <button class="secondary" (click)="visualizarHistorico(slot)">Visualizar Histórico</button>
      </div>
    </div>
  </div>
</div>